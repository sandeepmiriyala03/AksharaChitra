document.addEventListener("DOMContentLoaded",()=>{let e=e=>document.getElementById(e),t=(e,t,a)=>{e&&"function"==typeof e.addEventListener&&e.addEventListener(t,a)},a=e=>Array.from(document.querySelectorAll(e)),i=e("title"),l=e("subtitle"),s=e("message"),n=e("previewCard"),r=e("pSmallLogo"),o=e("pTitle"),d=e("pSubtitle"),c=e("pMessage"),u=e("pImage"),g=e("pQR"),p=e("generateBtn"),m=e("downloadBtn"),h=e("shareBtn"),y=e("saveBtn"),b=e("clearBtn"),v=(e("galleryGrid"),e("themeToggle")),f=e("language"),w=e("posterDateOption"),$=e("customDate"),k=e("shareWhatsAppBtn"),S=e("titleSize"),x=e("subtitleSize"),L=e("messageSize"),E=e("titleAlign"),C=e("subtitleAlign"),_=e("contentAlign"),A=e("titleColor"),I=e("subtitleColor"),B=e("messageColor"),M=e("titleBg"),F=e("subtitleBg"),P=e("messageBg"),T=e("fontFamily"),D=e("imageUpload"),N=e("imagePosition"),W=e("smallLogoUpload"),q=e("home_feature_create_btn"),R=e("goTopBtn"),z=e("cropModal"),H=e("cropImage"),U=e("applyCropBtn"),O=e("cancelCropBtn"),G=null,j=null,V="",Q="",Y="",Z="ak_autosave_v13",J="posters",K=null;async function X(){return new Promise((e,t)=>{if(K)return e(K);let a=indexedDB.open("ak_gallery_v13",2);a.onupgradeneeded=e=>{let t=e.target.result;if(!t.objectStoreNames.contains(J)){let a=t.createObjectStore(J,{keyPath:"id",autoIncrement:!0});a.createIndex("ts","ts",{unique:!1}),a.createIndex("title","title",{unique:!1}),console.log("âœ… Created new object store:",J)}},a.onsuccess=t=>{K=t.target.result,console.log("âœ… IndexedDB opened successfully"),e(K)},a.onerror=e=>{console.error("âŒ IndexedDB open failed:",e.target.error),t(e)}})}async function ee(e){try{let t=await X(),a=t.transaction(J,"readwrite"),i=a.objectStore(J);i.add(e),a.oncomplete=()=>console.log("âœ… Saved:",e.title),a.onerror=e=>console.error("âŒ Save error:",e)}catch(l){console.error("âŒ saveToDB() failed:",l)}}async function et(){try{let e=await X();return new Promise(t=>{let a=e.transaction(J,"readonly"),i=a.objectStore(J).getAll();i.onsuccess=()=>t(i.result||[]),i.onerror=()=>t([])})}catch(t){return console.error("âŒ getAllFromDB failed:",t),[]}}async function ea(e){try{let t=await X(),a=t.transaction(J,"readwrite");a.objectStore(J).delete(e),a.oncomplete=()=>console.log(`ğŸ—‘ï¸ Deleted poster id: ${e}`)}catch(i){console.error("âŒ deleteFromDB failed:",i)}}let ei=e=>document.querySelector(e);function el(e,t){e&&Object.assign(e.style,t)}function es(e,t,a){let i=(e||"AksharaChitra").replace(/[^\w\- ]/g,"").slice(0,40);return`${i}_${t}x${a}.png`}function en(e,t="#4CAF50"){let a=document.createElement("div");a.textContent=e,Object.assign(a.style,{position:"fixed",bottom:"20px",left:"50%",transform:"translateX(-50%)",background:t,color:"#fff",padding:"10px 18px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",fontFamily:"Montserrat, sans-serif",fontSize:"0.9rem",zIndex:"9999",opacity:"0",transition:"opacity 0.3s ease"}),document.body.appendChild(a),setTimeout(()=>a.style.opacity="1",50),setTimeout(()=>{a.style.opacity="0",setTimeout(()=>a.remove(),600)},2200)}function er(){if(!w)return;let e=new Date;if("current"===w.value)Y=e.toLocaleString(),$&&$.classList.add("hidden");else if("prevMonth"===w.value){let t=new Date(e);t.setMonth(t.getMonth()-1),Y=t.toLocaleString(),$&&$.classList.add("hidden")}else"custom"===w.value?($&&$.classList.remove("hidden"),$&&$.value&&(Y=new Date($.value).toLocaleString())):(Y="",$&&$.classList.add("hidden"))}a(".tab-btn").forEach(e=>{t(e,"click",async()=>{a(".tab-btn").forEach(e=>e.classList.remove("active")),a(".tab-content").forEach(e=>e.classList.remove("active")),e.classList.add("active");let t=e.getAttribute("data-tab"),i=document.getElementById(t);i&&i.classList.add("active"),"gallery"===t&&(console.log("\uD83D\uDDBC Safe Gallery Load (PWA)"),setTimeout(eD,120)),window.scrollTo({top:0,behavior:"smooth"})})}),q&&t(q,"click",()=>{let e=ei('.tab-btn[data-tab="create"]');e&&e.click()}),console.log("âœ… Tab Navigation Initialized (v18.3 Stable)"),v&&(t(v,"click",()=>{document.body.classList.toggle("dark"),localStorage.setItem("ak_theme_dark",document.body.classList.contains("dark"))}),"true"===localStorage.getItem("ak_theme_dark")&&document.body.classList.add("dark")),w&&t(w,"change",()=>{er(),ec()}),$&&t($,"change",()=>{Y=new Date($.value).toLocaleString(),ec()});let eo=document.getElementById("closeCropTop");function ed(e,t){if(!z||!H){"logo"===t?Q=e:V=e,ec();return}j=t,H.src=e,z.classList.remove("hidden");try{G&&G.destroy()}catch(a){}G=new Cropper(H,{viewMode:1,autoCropArea:1,background:!1,responsive:!0,movable:!0,zoomable:!0,rotatable:!1}),eu()}function ec(){console.log("Render Preview with:","logo"===j?Q:V)}function eu(){let e=document.getElementById("applyCropBtn"),t=document.getElementById("cancelCropBtn");if(!e||!t)return;let a=window.innerWidth<=768;a?(e.classList.add("mobile-btn"),e.classList.remove("desktop-btn"),t.classList.add("mobile-btn"),t.classList.remove("desktop-btn")):(e.classList.add("desktop-btn"),e.classList.remove("mobile-btn"),t.classList.add("desktop-btn"),t.classList.remove("mobile-btn"))}function eg(){let e=document.getElementById("posterBgColor");n&&e&&(n.style.background=e.value),e.addEventListener("change",()=>{n&&(n.style.background=e.value)})}function ec(){if(!n)return;let e=document.getElementById("qrAlign");if(e&&t(e,"change",ec),n.style.position="relative",n.style.overflow="hidden",n.style.padding=window.innerWidth<480?"8px":"12px",n.style.borderRadius="12px",eg(),r&&(r.innerHTML=Q?`<img src="${Q}" alt="logo" style="width:55px;height:55px;border-radius:8px;display:block;margin:6px auto;">`:""),o&&(o.textContent=i?.value||"",el(o,{fontFamily:T?.value||"Montserrat, sans-serif",fontSize:(S?.value||16)+"px",textAlign:E?.value||"center",color:A?.value||"#FFFFFF",background:M?.value||"transparent",fontWeight:"700",margin:"6px 0 4px",wordBreak:"break-word",display:o.textContent?"block":"none"})),d&&(d.textContent=l?.value||"",el(d,{fontFamily:T?.value||"Montserrat, sans-serif",fontSize:(x?.value||14)+"px",textAlign:C?.value||"center",color:I?.value||"#FFFFFF",background:F?.value||"transparent",fontWeight:"500",margin:"4px 0 10px",wordBreak:"break-word",display:d.textContent?"block":"none"})),u){if(V){let a=N?.value||"center",p="max-width:100%;display:block;margin:8px auto;border-radius:10px;object-fit:cover;";"left"===a&&(p="max-width:100%;display:block;margin:8px auto 8px 0;border-radius:10px;object-fit:cover;"),"right"===a&&(p="max-width:100%;display:block;margin:8px 0 8px auto;border-radius:10px;object-fit:cover;"),u.innerHTML=`<img src="${V}" alt="main" style="${p}">`}else u.innerHTML=""}c&&(c.innerHTML=(s?.value||"").replace(/\n/g,"<br>"),el(c,{fontFamily:T?.value||"Montserrat, sans-serif",fontSize:(L?.value||12)+"px",textAlign:_?.value||"center",color:B?.value||"#FFFFFF",background:P?.value||"transparent",marginTop:"10px",wordBreak:"break-word"}));let m=document.getElementById("qrText")?.value?.trim(),h=e?.value||"left";if(g&&(g.innerHTML="",m&&"undefined"!=typeof QRCode)){let y=window.innerWidth,b=70;b=y<360?50:y<480?60:y<768?70:y<1024?90:110;let v=document.createElement("div");v.style.textAlign=h,v.style.marginTop="12px";let f=document.createElement("div");f.id="qrPreview",v.appendChild(f),g.appendChild(v),new QRCode(f,{text:m,width:b,height:b,colorDark:"#000",colorLight:"#fff",correctLevel:QRCode.CorrectLevel.H})}n.querySelectorAll(".ak-footer").forEach(e=>e.remove());let w=document.createElement("div");w.className="ak-footer",w.style.position="absolute",w.style.bottom="6px",w.style.left="10px",w.style.right="10px",w.style.display="flex",w.style.alignItems="center",w.style.justifyContent="space-between",w.style.fontSize="10px",w.style.opacity="0.85",w.style.color="#000";let $=new Date,k=$.toLocaleString("en-IN",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",",""),D=document.createElement("span");D.textContent=k;let W=document.createElement("div");W.style.display="flex",W.style.alignItems="center",W.style.gap="6px";let q=document.createElement("img");q.src="logo.png",q.style.width="16px",q.style.height="16px",q.style.borderRadius="4px";let R=document.createElement("span");R.textContent="AksharaChitra",R.style.fontStyle="italic",W.appendChild(q),W.appendChild(R),w.appendChild(D),w.appendChild(W),n.appendChild(w)}U&&U.addEventListener("click",()=>{if(!G){z.classList.add("hidden");return}try{let e=G.getCroppedCanvas({maxWidth:3e3,imageSmoothingQuality:"high"}),t=e.toDataURL("image/png");"logo"===j?Q=t:V=t}catch(a){console.error("Crop apply error",a),alert("Unable to crop image.")}try{G.destroy()}catch(i){}G=null,z.classList.add("hidden"),ec()}),O&&O.addEventListener("click",()=>{try{G&&G.destroy()}catch(e){}G=null,H.src="",z.classList.add("hidden")}),eo&&eo.addEventListener("click",()=>{try{G&&G.destroy()}catch(e){}G=null,H.src="",z.classList.add("hidden")}),D&&D.addEventListener("change",e=>{let t=e.target.files?.[0];if(!t)return;let a=new FileReader;a.onload=e=>ed(e.target.result,"main"),a.readAsDataURL(t)}),W&&W.addEventListener("change",e=>{let t=e.target.files?.[0];if(!t)return;let a=new FileReader;a.onload=e=>ed(e.target.result,"logo"),a.readAsDataURL(t)}),eu(),window.addEventListener("resize",eu),[i,l,s,S,x,L,E,C,_,A,I,B,M,F,P,T,N].forEach(e=>{e&&t(e,"input",ec)});let ep=e("templateSelect"),em={eng:{news:{title:"\uD83D\uDCF0 Breaking News",subtitle:"",message:"Write your update here..."},birthday:{title:"\uD83C\uDF82 Happy Birthday!",subtitle:"Best Wishes",message:"Many Happy Returns of the Day!"},devotional:{title:"\uD83D\uDD49 Good Day",subtitle:"",message:"May divine blessings be with you \uD83D\uDE4F"},business:{title:"\uD83C\uDFE2 Business Update",subtitle:"",message:"Contact us at +91 99999 99999"},invitation:{title:"\uD83D\uDC8C Invitation",subtitle:"",message:"Venue â€¢ Date â€¢ Time"},quote:{title:"\uD83D\uDCAC Quote of the Day",subtitle:"",message:"Believe in yourself âœ¨"},goodMorning:{title:"\uD83C\uDF05 Good Morning",subtitle:"",message:"Start your day with positivity"},goodNight:{title:"\uD83C\uDF19 Good Night",subtitle:"",message:"Peaceful dreams and gentle rest"},goodAfternoon:{title:"â˜€ï¸ Good Afternoon",subtitle:"",message:"Hope your day is going great"},goodEvening:{title:"\uD83C\uDF06 Good Evening",subtitle:"",message:"Relax and unwind this evening"},weekendVibes:{title:"\uD83D\uDE0E Weekend Vibes",subtitle:"",message:"Have a relaxing weekend"},festivalGreeting:{title:"\uD83C\uDF8A Festival Greetings",subtitle:"",message:"Wishing you joy and prosperity this festival"},newYearWishes:{title:"\uD83C\uDF86 New Year Wishes",subtitle:"",message:"A fresh start and endless possibilities"},independenceDay:{title:"\uD83C\uDDEE\uD83C\uDDF3 Independence Day",subtitle:"",message:"Proud to celebrate freedom"},republicDay:{title:"\uD83D\uDD4A Republic Day",subtitle:"",message:"Honoring our nationâ€™s unity and strength"},diwaliMessage:{title:"\uD83E\uDE94 Diwali Message",subtitle:"",message:"Light up your life with happiness"},dailyMotivation:{title:"\uD83D\uDCAA Daily Motivation",subtitle:"",message:"One small step can change everything"},successQuote:{title:"\uD83D\uDE80 Success Quote",subtitle:"",message:"Dream it. Believe it. Achieve it"},fitnessQuote:{title:"\uD83C\uDFC3â€â™‚ï¸ Fitness Quote",subtitle:"",message:"Push yourself, no one else will"},positivityReminder:{title:"âœ¨ Positivity Reminder",subtitle:"",message:"Good energy only"},mindfulnessMoment:{title:"\uD83C\uDF38 Mindfulness Moment",subtitle:"",message:"Be calm, be present"},studyTime:{title:"\uD83D\uDCDA Study Time",subtitle:"",message:"Learning is a journey of growth"},examWishes:{title:"âœï¸ Exam Wishes",subtitle:"",message:"Best of luck for your exams"},resultAnnouncement:{title:"\uD83C\uDFC5 Result Announcement",subtitle:"",message:"Congratulations on your achievement"},schoolEvent:{title:"\uD83C\uDFEB School Event",subtitle:"",message:"Join us for a special class event"},teachersDay:{title:"\uD83C\uDF4E Teacherâ€™s Day",subtitle:"",message:"Thank you for guiding with wisdom"},weddingInvitation:{title:"\uD83D\uDC8D Wedding Invitation",subtitle:"",message:"Two hearts, one love"},engagementAnnounce:{title:"\uD83D\uDC9E Engagement Announcement",subtitle:"",message:"We said yes!"},babyShower:{title:"\uD83D\uDC76 Baby Shower",subtitle:"",message:"A little miracle is on the way"},housewarming:{title:"\uD83C\uDFE0 Housewarming",subtitle:"",message:"Warm wishes for our new home"},farewellCelebration:{title:"\uD83C\uDF08 Farewell Celebration",subtitle:"",message:"Goodbyes are new beginnings"},jobVacancy:{title:"\uD83E\uDD1D Job Vacancy",subtitle:"",message:"Weâ€™re hiring! Join our team"},offerDiscount:{title:"\uD83D\uDCB8 Offer/Discount",subtitle:"",message:"Special sale this weekend"},achievementPost:{title:"\uD83C\uDFC6 Achievement Post",subtitle:"",message:"Proud moment unlocked"},productLaunch:{title:"\uD83D\uDE80 Product Launch",subtitle:"",message:"Introducing something exciting"},serviceUpdate:{title:"\uD83D\uDD27 Service Update",subtitle:"",message:"Check out our latest features"}},tel:{news:{title:"\uD83D\uDCF0 à°¬à±à°°à±‡à°•à°¿à°‚à°—à± à°¨à±à°¯à±‚à°¸à±",subtitle:"",message:"à°®à±€ à°…à°ªà±à°¡à±‡à°Ÿà± à°‡à°•à±à°•à°¡ à°°à°¾à°¯à°‚à°¡à°¿..."},birthday:{title:"\uD83C\uDF82 à°œà°¨à±à°®à°¦à°¿à°¨ à°¶à±à°­à°¾à°•à°¾à°‚à°•à±à°·à°²à±!",subtitle:"à°®à°‚à°šà°¿ à°†à°¶à±€à°¸à±à°¸à±à°²à±",message:"à°¹à±à°¯à°¾à°ªà±€ à°¬à°°à±à°¤à±â€Œà°¡à±‡ \uD83C\uDF89"},devotional:{title:"\uD83D\uDD49 à°¶à±à°­à±‹à°¦à°¯à°‚",subtitle:"",message:"à°¦à±‡à°µà±à°¨à°¿ à°†à°¶à±€à°¸à±à°¸à±à°²à± à°®à±€à°¤à±‹ à°‰à°‚à°¡à°¾à°²à°¿ \uD83D\uDE4F"},business:{title:"\uD83C\uDFE2 à°µà±à°¯à°¾à°ªà°¾à°° à°…à°ªà±à°¡à±‡à°Ÿà±",subtitle:"",message:"à°®à°®à±à°®à°²à±à°¨à°¿ à°¸à°‚à°ªà±à°°à°¦à°¿à°‚à°šà°‚à°¡à°¿: +91 99999 99999"},invitation:{title:"\uD83D\uDC8C à°†à°¹à±à°µà°¾à°¨à°‚",subtitle:"",message:"à°¸à±à°¥à°²à°‚ â€¢ à°¤à±‡à°¦à±€ â€¢ à°¸à°®à°¯à°‚"},quote:{title:"\uD83D\uDCAC à°¨à±‡à°Ÿà°¿ à°†à°²à±‹à°šà°¨",subtitle:"",message:"à°®à±€ à°®à±€à°¦ à°¨à°®à±à°®à°•à°‚ à°ªà±†à°Ÿà±à°Ÿà±à°•à±‹à°‚à°¡à°¿ âœ¨"},goodMorning:{title:"\uD83C\uDF05 à°¶à±à°­à±‹à°¦à°¯à°‚",subtitle:"",message:"à°®à±€ à°°à±‹à°œà± à°¸à°¾à°¨à±à°•à±‚à°²à°¤à°¤à±‹ à°ªà±à°°à°¾à°°à°‚à°­à°¿à°‚à°šà°‚à°¡à°¿"},goodNight:{title:"\uD83C\uDF19 à°¶à±à°­ à°°à°¾à°¤à±à°°à°¿",subtitle:"",message:"à°¶à°¾à°‚à°¤à°¿à°¯à±à°¤ à°¨à°¿à°¦à±à°°à°²à± à°®à°°à°¿à°¯à± à°¸à±à°¨à±à°¨à°¿à°¤à°®à±ˆà°¨ à°µà°¿à°¶à±à°°à°¾à°‚à°¤à°¿"},goodAfternoon:{title:"â˜€ï¸ à°¶à±à°­ à°®à°§à±à°¯à°¾à°¹à±à°¨à°‚",subtitle:"",message:"à°®à±€ à°°à±‹à°œà± à°¬à°¾à°—à±à°‚à°¡à°¾à°²à°¨à°¿ à°†à°¶à°¿à°¸à±à°¤à±à°¨à±à°¨à°¾à°®à±"},goodEvening:{title:"\uD83C\uDF06 à°¶à±à°­ à°¸à°¾à°¯à°‚à°¤à±à°°à°‚",subtitle:"",message:"à°ˆ à°¸à°¾à°¯à°‚à°¤à±à°°à°‚ à°µà°¿à°¶à±à°°à°¾à°‚à°¤à°¿à°—à°¾ à°‰à°‚à°¡à°‚à°¡à°¿"},weekendVibes:{title:"\uD83D\uDE0E à°µà±€à°•à±†à°‚à°¡à± à°µà±ˆà°¬à±â€Œà°¸à±à°•à±",subtitle:"",message:"à°µà°¿à°¶à±à°°à°¾à°‚à°¤à±à°¯à°‚à°¤à±‹ à°ªà±‚à°Ÿ à°—à°¡à°ªà°‚à°¡à°¿"},festivalGreeting:{title:"\uD83C\uDF8A à°ªà°‚à°¡à±à°— à°¶à±à°­à°¾à°•à°¾à°‚à°•à±à°·à°²à±",subtitle:"",message:"à°ˆ à°ªà°‚à°¡à±à°— à°¸à°‚à°¦à°°à±à°­à°‚à°—à°¾ à°†à°¨à°‚à°¦à°‚ à°®à°°à°¿à°¯à± à°¸à°‚à°ªà°¦à°¤à±‹ à°‰à°‚à°¡à°‚à°¡à°¿"},newYearWishes:{title:"\uD83C\uDF86 à°•à±Šà°¤à±à°¤ à°¸à°‚à°µà°¤à±à°¸à°° à°¶à±à°­à°¾à°•à°¾à°‚à°•à±à°·à°²à±",subtitle:"",message:"à°•à±Šà°¤à±à°¤ à°†à°°à°‚à°­à°‚ à°®à°°à°¿à°¯à± à°¸à°°à±à°µà°¸à°¾à°§à°¾à°°à°£ à°…à°µà°•à°¾à°¶à°¾à°²à±"},independenceDay:{title:"\uD83C\uDDEE\uD83C\uDDF3 à°¸à±à°µà°¾à°¤à°‚à°¤à±à°° à°¦à°¿à°¨à±‹à°¤à±à°¸à°µà°‚",subtitle:"",message:"à°¸à±à°µà°¾à°¤à°‚à°¤à±à°°à°¾à°¨à±à°¨à°¿ à°œà°°à±à°ªà±à°•à±‹à°µà°¡à°¾à°¨à°¿à°•à°¿ à°—à°°à±à°µà°ªà°¡à±à°¤à±à°¨à±à°¨à°¾à°®à±"},republicDay:{title:"\uD83D\uDD4A à°—à°£à°¤à°‚à°¤à±à°° à°¦à°¿à°¨à±‹à°¤à±à°¸à°µà°‚",subtitle:"",message:"à°®à°¾ à°œà°¾à°¤à°¿ à°à°•à±à°¯à°¤ à°®à°°à°¿à°¯à± à°¬à°²à°¾à°¨à±à°¨à°¿ à°—à±Œà°°à°µà°¿à°‚à°šà°‚à°¡à°¿"},diwaliMessage:{title:"\uD83E\uDE94 à°¦à±€à°ªà°¾à°µà°³à°¿ à°¸à°‚à°¦à±‡à°¶à°‚",subtitle:"",message:"à°®à±€ à°œà±€à°µà°¿à°¤à°¾à°¨à±à°¨à°¿ à°¸à°‚à°¤à±‹à°·à°‚à°¤à±‹ à°µà±†à°²à°¿à°—à°¿à°‚à°šà°‚à°¡à°¿"},dailyMotivation:{title:"\uD83D\uDCAA à°°à±‹à°œà±à°°à±‹à°œà±à°•à± à°ªà±à°°à±‡à°°à°£",subtitle:"",message:"à°’à°• à°šà°¿à°¨à±à°¨ à°…à°¡à±à°—à± à°…à°¨à±à°¨à°¿à°‚à°Ÿà°¿à°¨à±€ à°®à°¾à°°à±à°šà±Šà°šà±à°šà±"},successQuote:{title:"\uD83D\uDE80 à°µà°¿à°œà°¯à°‚ à°¸à°‚à°¦à±‡à°¶à°‚",subtitle:"",message:"à°•à°²à°²à± à°•à°¨à°‚à°¡à°¿. à°¨à°®à±à°®à°‚à°¡à°¿. à°¸à°¾à°§à°¿à°‚à°šà°‚à°¡à°¿"},fitnessQuote:{title:"\uD83C\uDFC3â€â™‚ï¸ à°†à°°à±‹à°—à±à°¯ à°¸à°‚à°¦à±‡à°¶à°‚",subtitle:"",message:"à°ªà±à°°à°¸à°¨à±à°¨à°‚à°—à°¾ à°ªà±à°°à±‡à°°à±‡à°ªà°¿à°‚à°šà±à°•à±‹à°‚à°¡à°¿ à°‡à°²à°¾à°‚à°Ÿà°¿ à°•à°¾à°°à°£à°¾à°² à°•à±‹à°¸à°‚"},positivityReminder:{title:"âœ¨ à°¸à°¾à°¨à±à°•à±‚à°²à°¤ à°°à°¿à°®à±ˆà°‚à°Ÿà°°à±",subtitle:"",message:"à°®à°¾à°¤à±à°°à°®à±‡ à°®à°‚à°šà°¿à°¦à°¿ à°‰à¤°à¥à¤œà¤¾"},mindfulnessMoment:{title:"\uD83C\uDF38 à°®à°¨à±‹à°¨à°¿à°µà±‡à°¦ à°¨à°¿à°®à°¿à°·à°‚",subtitle:"",message:"à°¶à°¾à°‚à°¤à°¿à°¯à±à°¤à°‚à°—à°¾ à°‰à°‚à°¡à±, à°ªà±à°°à°¸à±à°¤à±à°¤à°¾à°¨à°¿à°•à°¿ à°‰à°‚à°¡à°‚à°¡à°¿"},studyTime:{title:"\uD83D\uDCDA à°ªà° à°¨à°‚ à°¸à°®à°¯à°‚",subtitle:"",message:"à°µà°¾à°°à°¿à°¦à±à°¦à°°à± à°‰à°¨à±à°¨à°¤à°¿à°•à°¿ à°ªà°¾à° à°‚"},examWishes:{title:"âœï¸ à°ªà°°à±€à°•à±à°· à°¶à±à°­à°¾à°•à°¾à°‚à°•à±à°·à°²à±",subtitle:"",message:"à°®à±€ à°ªà°°à±€à°•à±à°·à°² à°•à±‹à°¸o à°¶à±à°­à°¾à°•à°¾à°‚à°•à±à°·à°²à±"},resultAnnouncement:{title:"\uD83C\uDFC5 à°«à°²à°¿à°¤à°¾à°² à°ªà±à°°à°•à°Ÿà°¿à°‚à°ªà±",subtitle:"",message:"à°®à±€ à°µà°¿à°œà°¯à°¾à°¨à±à°¨à°¿ à°…à°­à°¿à°¨à°‚à°¦à°¨à°²à±"},schoolEvent:{title:"\uD83C\uDFEB à°µà°¿à°¦à±à°¯à°¾à°²à°¯ à°•à°¾à°°à±à°¯à°•à±à°°à°®à°‚",subtitle:"",message:"à°ªà±à°°à°¤à±à°¯à±‡à°• à°¤à°°à°—à°¤à°¿ à°•à°¾à°°à±à°¯à°•à±à°°à°®à°¾à°¨à°¿à°•à°¿ à°®à°¾à°•à± à°œà°¤ à°•à°¾à°µà°‚à°¡à°¿"},teachersDay:{title:"\uD83C\uDF4E à°—à±à°°à±à°µà± à°¦à°¿à°¨à±‹à°¤à±à°¸à°µà°‚",subtitle:"",message:"à°œà±à°à°¾à°¨à°‚à°¤à±‹ à°®à°¾à°°à±à°—à°¨à°¿à°°à±à°¦à±‡à°¶à°‚ à°šà±‡à°¸à°¿à°¨à°‚à°¦à±à°•à± à°§à°¨à±à°¯à°µà°¾à°¦à°¾à°²à±"},weddingInvitation:{title:"\uD83D\uDC8D à°ªà±†à°³à±à°²à°¿ à°†à°¹à±à°µà°¾à°¨à°‚",subtitle:"",message:"à°°à±†à°‚à°¡à± à°¹à±ƒà°¦à°¯à°¾à°²à±, à°’à°• à°ªà±à°°à±‡à°®"},engagementAnnounce:{title:"\uD83D\uDC9E à°¨à°¿à°¶à±à°šà°¯ à°…à°­à°¿à°¨à°‚à°¦à°¨à°²à±",subtitle:"",message:"à°®à±‡à°®à± à°“à°•à±‡ à°…à°¨à°¿ à°šà±†à°ªà±à°ªà°¾à°°à±!"},babyShower:{title:"\uD83D\uDC76 à°¬à±‡à°¬à±€ à°·à°µà°°à±",subtitle:"",message:"à°šà°¿à°¨à±à°¨ à°…à°¦à±à°­à±à°¤à°‚ à°°à°¾à°²à°¨à±à°‚à°¦à°¿"},housewarming:{title:"\uD83C\uDFE0 à°‡à°³à±à°³ à°ªà±à°°à°µà±‡à°¶à°‚",subtitle:"",message:"à°®à°¾ à°‡à°‚à°Ÿà°¿à°•à°¿ à°¹à±ƒà°¦à°¯à°ªà±‚à°°à±à°µà°• à°¶à±à°­à°¾à°•à°¾à°‚à°•à±à°·à°²à±"},farewellCelebration:{title:"\uD83C\uDF08 à°µà±€à°¡à±à°•à±‹à°²à± à°µà±‡à°¡à±à°•",subtitle:"",message:"à°µà±€à°¡à±à°•à±Šà°²à±à°²à± à°…à°¨à±‡à°¦à°¿ à°•à±Šà°¤à±à°¤ à°ªà±à°°à°¾à°°à°‚à°­à°‚"},jobVacancy:{title:"\uD83E\uDD1D à°‰à°¦à±à°¯à±‹à°— à°…à°µà°•à°¾à°¶à°®à±",subtitle:"",message:"à°®à±‡à°®à± à°‰à°¦à±à°¯à±‹à°—à±à°²à°¨à± à°¤à±€à°¸à±à°•à±à°‚à°Ÿà±à°¨à±à°¨à°¾à°®à±! à°œà°Ÿà±à°Ÿà±à°²à±‹ à°šà±‡à°°à°‚à°¡à°¿"},offerDiscount:{title:"\uD83D\uDCB8 à°†à°«à°°à± / à°¡à°¿à°¸à±à°•à±Œà°‚à°Ÿà±",subtitle:"",message:"à°ˆ à°µà±€à°•à±†à°‚à°¡à± à°ªà±à°°à°¤à±à°¯à±‡à°• à°…à°®à±à°®à°•à°¾à°²à±"},achievementPost:{title:"\uD83C\uDFC6 à°¸à°¾à°§à°¨ à°ªà±‹à°¸à±à°Ÿà±",subtitle:"",message:"à°—à°°à±à°µà°ªà±‚à°°à±à°µà°• à°•à±à°·à°£à°‚"},productLaunch:{title:"\uD83D\uDE80 à°‰à°¤à±à°ªà°¤à±à°¤à°¿ à°ªà±à°°à°¾à°°à°‚à°­à°‚",subtitle:"",message:"à°’à°• à°°à±‹à°®à°¾à°‚à°šà°•à°®à±ˆà°¨ à°µà°¿à°·à°¯à°‚ à°ªà°°à°¿à°šà°¯à°‚"},serviceUpdate:{title:"\uD83D\uDD27 à°¸à±‡à°µà°¾ à°¨à°µà±€à°•à°°à°£",subtitle:"",message:"à°®à±‡à°®à± à°¤à°¾à°œà°¾ à°²à°•à±à°·à°£à°¾à°²à°¨à± à°šà±‚à°¸à±à°•à±‹à°‚à°¡à°¿"}},hin:{news:{title:"\uD83D\uDCF0 à¤¬à¥à¤°à¥‡à¤•à¤¿à¤‚à¤— à¤¨à¥à¤¯à¥‚à¤œà¤¼",subtitle:"",message:"à¤…à¤ªà¤¨à¤¾ à¤…à¤ªà¤¡à¥‡à¤Ÿ à¤¯à¤¹à¤¾à¤ à¤²à¤¿à¤–à¥‡à¤‚..."},birthday:{title:"\uD83C\uDF82 à¤œà¤¨à¥à¤®à¤¦à¤¿à¤¨ à¤®à¥à¤¬à¤¾à¤°à¤•!",subtitle:"à¤¶à¥à¤­à¤•à¤¾à¤®à¤¨à¤¾à¤à¤",message:"à¤¹à¥ˆà¤ªà¥à¤ªà¥€ à¤¬à¤°à¥à¤¥à¤¡à¥‡ \uD83C\uDF89"},devotional:{title:"\uD83D\uDD49 à¤¶à¥à¤­ à¤¦à¤¿à¤¨",subtitle:"",message:"à¤­à¤—à¤µà¤¾à¤¨ à¤•à¥€ à¤•à¥ƒà¤ªà¤¾ à¤†à¤ª à¤ªà¤° à¤¬à¤¨à¥€ à¤°à¤¹à¥‡ \uD83D\uDE4F"},business:{title:"\uD83C\uDFE2 à¤µà¥à¤¯à¤¾à¤ªà¤¾à¤° à¤…à¤ªà¤¡à¥‡à¤Ÿ",subtitle:"",message:"à¤¸à¤‚à¤ªà¤°à¥à¤• à¤•à¤°à¥‡à¤‚: +91 99999 99999"},invitation:{title:"\uD83D\uDC8C à¤¨à¤¿à¤®à¤‚à¤¤à¥à¤°à¤£",subtitle:"",message:"à¤¸à¥à¤¥à¤¾à¤¨ â€¢ à¤¤à¤¿à¤¥à¤¿ â€¢ à¤¸à¤®à¤¯"},quote:{title:"\uD83D\uDCAC à¤†à¤œ à¤•à¤¾ à¤µà¤¿à¤šà¤¾à¤°",subtitle:"",message:"à¤…à¤ªà¤¨à¥‡ à¤†à¤ª à¤ªà¤° à¤µà¤¿à¤¶à¥à¤µà¤¾à¤¸ à¤°à¤–à¥‡à¤‚ âœ¨"}},san:{news:{title:"\uD83D\uDCF0 à¤¤à¤¾à¤œà¤¾ à¤µà¤¾à¤°à¥à¤¤à¤¾à¤ƒ",subtitle:"",message:"à¤…à¤¤à¥à¤° à¤¸à¤®à¤¾à¤šà¤¾à¤°à¤‚ à¤²à¤¿à¤–à¤¤à¥..."},birthday:{title:"\uD83C\uDF82 à¤œà¤¨à¥à¤®à¤¦à¤¿à¤¨à¤¶à¥à¤­à¤¾à¤¶à¤¯à¤¾à¤ƒ!",subtitle:"à¤¶à¥à¤­à¤•à¤¾à¤®à¤¨à¤¾à¤ƒ",message:"à¤¹à¥ˆà¤ªà¥à¤ªà¥€ à¤¬à¤°à¥à¤¥à¤¡à¥‡ \uD83C\uDF89"},devotional:{title:"\uD83D\uDD49 à¤¶à¥à¤­à¤¦à¤¿à¤¨à¤®à¥",subtitle:"",message:"à¤ˆà¤¶à¥à¤µà¤°à¤¸à¥à¤¯ à¤†à¤¶à¥€à¤°à¥à¤µà¤¾à¤¦à¤¾à¤ƒ à¤­à¤µà¤¨à¥à¤¤à¥ \uD83D\uDE4F"},business:{title:"\uD83C\uDFE2 à¤µà¥à¤¯à¤µà¤¸à¤¾à¤¯à¤¸à¥‚à¤šà¤¨à¤¾",subtitle:"",message:"à¤¸à¤®à¥à¤ªà¤°à¥à¤•à¤ƒ: +91 99999 99999"},invitation:{title:"\uD83D\uDC8C à¤†à¤®à¤¨à¥à¤¤à¥à¤°à¤£à¤®à¥",subtitle:"",message:"à¤¸à¥à¤¥à¤¾à¤¨à¤®à¥ â€¢ à¤¤à¤¿à¤¥à¤¿à¤ƒ â€¢ à¤¸à¤®à¤¯à¤ƒ"},quote:{title:"\uD83D\uDCAC à¤†à¤œà¥à¤¯à¤¸à¥à¤¯ à¤µà¤¿à¤šà¤¾à¤°à¤ƒ",subtitle:"",message:"à¤†à¤¤à¥à¤®à¤µà¤¿à¤¶à¥à¤µà¤¾à¤¸à¤ƒ à¤•à¥à¤°à¥à¤µà¤¨à¥à¤¤à¥ âœ¨"}},tam:{news:{title:"\uD83D\uDCF0 à®‰à®Ÿà®©à®Ÿà®¿ à®šà¯†à®¯à¯à®¤à®¿",subtitle:"",message:"à®‰à®™à¯à®•à®³à¯ à®¤à®•à®µà®²à¯ˆ à®à®´à¯à®¤à¯à®™à¯à®•à®³à¯..."},birthday:{title:"\uD83C\uDF82 à®ªà®¿à®±à®¨à¯à®¤à®¨à®¾à®³à¯ à®µà®¾à®´à¯à®¤à¯à®¤à¯à®•à®³à¯!",subtitle:"à®…à®©à¯à®ªà¯ à®µà®¾à®´à¯à®¤à¯à®¤à¯à®•à®³à¯",message:"Happy Birthday \uD83C\uDF89"},devotional:{title:"\uD83D\uDD49 à®‡à®©à®¿à®¯ à®¨à®¾à®³à¯",subtitle:"",message:"à®¤à¯†à®¯à¯à®µ à®†à®šà¯€à®°à¯à®µà®¾à®¤à®®à¯ à®‰à®™à¯à®•à®³à¯à®Ÿà®©à¯ \uD83D\uDE4F"},business:{title:"\uD83C\uDFE2 à®µà®£à®¿à®• à®…à®±à®¿à®µà®¿à®ªà¯à®ªà¯",subtitle:"",message:"à®¤à¯Šà®Ÿà®°à¯à®ªà¯: +91 99999 99999"},invitation:{title:"\uD83D\uDC8C à®…à®´à¯ˆà®ªà¯à®ªà®¿à®¤à®´à¯",subtitle:"",message:"à®‡à®Ÿà®®à¯ â€¢ à®¤à¯‡à®¤à®¿ â€¢ à®¨à¯‡à®°à®®à¯"},quote:{title:"\uD83D\uDCAC à®‡à®©à¯à®±à¯ à®’à®°à¯ à®šà®¿à®¨à¯à®¤à®©à¯ˆ",subtitle:"",message:"à®‰à®™à¯à®•à®³à¯ˆ à®¨à®®à¯à®ªà¯à®™à¯à®•à®³à¯ âœ¨"}},kan:{news:{title:"\uD83D\uDCF0 à²¤à²¾à²œà²¾ à²¸à³à²¦à³à²¦à²¿",subtitle:"",message:"à²¨à²¿à²®à³à²® à²…à²ªà³â€Œà²¡à³‡à²Ÿà³ à²¬à²°à³†à²¯à²¿à²°à²¿..."},birthday:{title:"\uD83C\uDF82 à²¹à³à²Ÿà³à²Ÿà³à²¹à²¬à³à²¬à²¦ à²¶à³à²­à²¾à²¶à²¯à²—à²³à³!",subtitle:"à²¶à³à²­à²¾à²¶à²¯à²—à²³à³",message:"Happy Birthday \uD83C\uDF89"},devotional:{title:"\uD83D\uDD49 à²¶à³à²­ à²¦à²¿à²¨",subtitle:"",message:"à²¦à³‡à²µà²° à²†à²¶à³€à²°à³à²µà²¾à²¦ à²¨à²¿à²®à³à²®à³Šà²‚à²¦à²¿à²—à²¿à²°à²²à²¿ \uD83D\uDE4F"},business:{title:"\uD83C\uDFE2 à²µà³à²¯à²µà²¹à²¾à²°à²¦ à²®à²¾à²¹à²¿à²¤à²¿",subtitle:"",message:"à²¸à²‚à²ªà²°à³à²•à²¿à²¸à²¿: +91 99999 99999"},invitation:{title:"\uD83D\uDC8C à²†à²¹à³à²µà²¾à²¨",subtitle:"",message:"à²¸à³à²¥à²³ â€¢ à²¦à²¿à²¨à²¾à²‚à²• â€¢ à²¸à²®à²¯"},quote:{title:"\uD83D\uDCAC à²‡à²‚à²¦à²¿à²¨ à²šà²¿à²‚à²¤à²¨à³†",subtitle:"",message:"à²¨à²¿à²®à³à²®à²¨à³à²¨à³ à²¨à²‚à²¬à²¿ âœ¨"}},mal:{news:{title:"\uD83D\uDCF0 à´¬àµà´°àµ‡à´•àµà´•à´¿à´‚à´—àµ à´¨àµà´¯àµ‚à´¸àµ",subtitle:"",message:"à´¨à´¿à´™àµà´™à´³àµà´Ÿàµ† à´…à´ªàµâ€Œà´¡àµ‡à´±àµà´±àµ à´‡à´µà´¿à´Ÿàµ† à´à´´àµà´¤àµà´•..."},birthday:{title:"\uD83C\uDF82 à´œà´¨àµà´®à´¦à´¿à´¨à´¾à´¶à´‚à´¸à´•àµ¾!",subtitle:"à´¨à´²àµà´² à´†à´¶à´‚à´¸à´•àµ¾",message:"Happy Birthday \uD83C\uDF89"},devotional:{title:"\uD83D\uDD49 à´¨à´²àµà´² à´¦à´¿à´µà´¸à´‚",subtitle:"",message:"à´¦àµˆà´µà´¾à´¨àµà´—àµà´°à´¹à´‚ à´¨à´¿à´™àµà´™à´³àµ‹à´ŸàµŠà´ªàµà´ªà´‚ \uD83D\uDE4F"},business:{title:"\uD83C\uDFE2 à´¬à´¿à´¸à´¿à´¨à´¸àµ à´…à´ªàµà´¡àµ‡à´±àµà´±àµ",subtitle:"",message:"à´¬à´¨àµà´§à´ªàµà´ªàµ†à´Ÿàµà´•: +91 99999 99999"},invitation:{title:"\uD83D\uDC8C à´•àµà´·à´£à´‚",subtitle:"",message:"à´¸àµà´¥à´²à´‚ â€¢ à´¤àµ€à´¯à´¤à´¿ â€¢ à´¸à´®à´¯à´‚"},quote:{title:"\uD83D\uDCAC à´‡à´¨àµà´¨à´¤àµà´¤àµ† à´šà´¿à´¨àµà´¤",subtitle:"",message:"à´¸àµà´µà´¯à´‚ à´µà´¿à´¶àµà´µà´¸à´¿à´•àµà´•àµà´• âœ¨"}},ori:{news:{title:"\uD83D\uDCF0 à¬¬à­à¬°à­‡à¬•à¬¿à¬‚ à¬¨à­à­Ÿà­à¬œà­",subtitle:"",message:"à¬†à¬ªà¬£à¬™à­à¬• à¬…à¬ªà¬¡à­‡à¬Ÿà­ à¬à¬ à¬¾à¬°à­‡ à¬²à­‡à¬–à¬¨à­à¬¤à­..."},birthday:{title:"\uD83C\uDF82 à¬œà¬¨à­à¬®à¬¦à¬¿à¬¨ à¬¶à­à¬­à­‡à¬šà­à¬›à¬¾!",subtitle:"à¬¶à­à¬­à¬•à¬¾à¬®à¬¨à¬¾",message:"Happy Birthday \uD83C\uDF89"},devotional:{title:"\uD83D\uDD49 à¬¶à­à¬­ à¬¦à¬¿à¬¨",subtitle:"",message:"à¬¦à­‡à¬¬à¬™à­à¬• à¬†à¬¶à­€à¬°à­à¬¬à¬¾à¬¦ à¬°à¬¹à­ \uD83D\uDE4F"},business:{title:"\uD83C\uDFE2 à¬¬à­à­Ÿà¬¬à¬¸à¬¾à­Ÿ à¬¸à­‚à¬šà¬¨à¬¾",subtitle:"",message:"à¬¯à­‹à¬—à¬¾à¬¯à­‹à¬—: +91 99999 99999"},invitation:{title:"\uD83D\uDC8C à¬†à¬®à¬¨à­à¬¤à­à¬°à¬£",subtitle:"",message:"à¬¸à­à¬¥à¬¾à¬¨ â€¢ à¬¤à¬¾à¬°à¬¿à¬– â€¢ à¬¸à¬®à­Ÿ"},quote:{title:"\uD83D\uDCAC à¬†à¬œà¬¿à¬° à¬šà¬¿à¬¨à­à¬¤à¬¾",subtitle:"",message:"à¬¨à¬¿à¬œà¬•à­ à¬¬à¬¿à¬¶à­à­±à¬¾à¬¸ à¬•à¬°à¬¨à­à¬¤à­ âœ¨"}}};ep&&t(ep,"change",()=>{let e=f?f.value:"en",t=ep.value;if(em[e]&&em[e][t]){let a=em[e][t];i&&(i.value=a.title),l&&(l.value=a.subtitle),s&&(s.value=a.message),ec()}});let eh={en:{title:"Title",subtitle:"Subtitle",message:"Type your message..."},te:{title:"à°¶à±€à°°à±à°·à°¿à°•",subtitle:"à°‰à°ªà°¶à±€à°°à±à°·à°¿à°•",message:"à°¸à°‚à°¦à±‡à°¶à°‚ à°°à°¾à°¯à°‚à°¡à°¿..."},hi:{title:"à¤¶à¥€à¤°à¥à¤·à¤•",subtitle:"à¤‰à¤ªà¤¶à¥€à¤°à¥à¤·à¤•",message:"à¤…à¤ªà¤¨à¤¾ à¤¸à¤‚à¤¦à¥‡à¤¶ à¤²à¤¿à¤–à¥‡à¤‚..."},ta:{title:"à®¤à®²à¯ˆà®ªà¯à®ªà¯",subtitle:"à®¤à¯à®£à¯ˆà®¤à¯ à®¤à®²à¯ˆà®ªà¯à®ªà¯",message:"à®‰à®™à¯à®•à®³à¯ à®šà¯†à®¯à¯à®¤à®¿à®¯à¯ˆ à®à®´à¯à®¤à¯à®™à¯à®•à®³à¯..."},kn:{title:"à²¶à³€à²°à³à²·à²¿à²•à³†",subtitle:"à²‰à²ªà²¶à³€à²°à³à²·à²¿à²•à³†",message:"à²¨à²¿à²®à³à²® à²¸à²‚à²¦à³‡à²¶à²µà²¨à³à²¨à³ à²¬à²°à³†à²¯à²¿à²°à²¿..."},ml:{title:"à´¶àµ€àµ¼à´·à´•à´‚",subtitle:"à´‰à´ªà´¶àµ€àµ¼à´·à´•à´‚",message:"à´¤à´¾à´™àµà´•à´³àµà´Ÿàµ† à´¸à´¨àµà´¦àµ‡à´¶à´‚ à´…à´Ÿà´¿à´•àµà´•àµŠà´³àµà´³àµà´•..."},or:{title:"à¬¶à­€à¬°à­à¬·à¬•",subtitle:"à¬‰à¬ªà¬¶à­€à¬°à­à¬·à¬•",message:"à¬†à¬ªà¬£à¬™à­à¬• à¬¸à¬¨à­à¬¦à­‡à¬¶ à¬²à­‡à¬–à¬¨à­à¬¤à­..."},sa:{title:"à¤¶à¥€à¤°à¥à¤·à¤•à¤®à¥",subtitle:"à¤‰à¤ªà¤¶à¥€à¤°à¥à¤·à¤•à¤®à¥",message:"à¤¸à¤¨à¥à¤¦à¥‡à¤¶à¤‚ à¤²à¤¿à¤–à¤¤à¥..."}};async function ey({download:e=!1}={}){if(!n)return alert("Preview not found"),null;if("undefined"==typeof html2canvas)try{await new Promise((e,t)=>{let a=document.createElement("script");a.src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js",a.onload=e,a.onerror=t,document.head.appendChild(a)})}catch{return alert("âŒ html2canvas failed to load. Check your internet."),null}let t=i?.value?.trim()||"";if(!t)return en("âš ï¸ Please enter a title before generating your poster!","#E53935"),null;let a=window.innerWidth||800,l=Math.min(1200,Math.max(600,1.5*a)),s=Math.min(3,window.devicePixelRatio||2),r=n.style.width,o=n.style.height,d=n.style.padding,c=n.querySelector(".ak-footer"),u=c&&"none"===c.style.display;c&&(c.style.display="none"),n.style.width=l+"px",n.style.height=Math.round(9*l/16)+"px",n.style.padding="20px 30px 24px 30px",n.style.overflow="visible";let g=document.createElement("div");function p(){c&&!u&&(c.style.display="flex"),n.style.width=r,n.style.height=o,n.style.padding=d,n.style.overflow="hidden",g.remove()}Object.assign(g.style,{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,color:"#fff",fontFamily:"Montserrat, sans-serif",fontSize:"1.1rem",fontWeight:"600"}),g.textContent="â³ Generating Poster...",document.body.appendChild(g);try{await new Promise(e=>setTimeout(e,150));let m=await html2canvas(n,{scale:s,useCORS:!0,backgroundColor:"#ffffff",allowTaint:!0}),h=40*s,y=document.createElement("canvas");y.width=m.width,y.height=m.height+h;let b=y.getContext("2d");b.drawImage(m,0,0);let v=m.height;b.fillStyle="#000000",b.fillRect(0,v,y.width,h),b.font=`${Math.max(10,Math.round(12*s))}px Montserrat, Arial, sans-serif`,b.textBaseline="bottom",b.fillStyle="#e0e0e0";let f=new Date,w=f.toLocaleString("en-IN",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",",""),$="AksharaChitra",k=y.height-10*s;b.textAlign="left",b.fillText(w,24*s,k),b.textAlign="right",b.fillText($,y.width-24*s,k);let S=new Image;S.crossOrigin="anonymous",S.src=(window.location.origin||"")+"/logo.png",await new Promise(e=>{let t=()=>e();S.onload=t,S.onerror=t,setTimeout(t,800)});let x=b.measureText($).width,L=16*s,E=y.width-(x+40*s);S.complete&&S.naturalWidth>0?b.drawImage(S,E,k-14*s,L,L):(b.beginPath(),b.arc(y.width-(x+30*s),k-7*s,3*s,0,2*Math.PI),b.fillStyle="#f44336",b.fill());let C=y.toDataURL("image/png");if(!C||C.length<3e4)return en("âš ï¸ Generated image seems empty â€” please add content.","#E53935"),p(),null;if(e){let _=`${(t||"AksharaChitra").replace(/[^\w\- ]/g,"")}_${w.replace(/[/: ]/g,"_")}.png`,A=document.createElement("a");A.href=C,A.download=_,document.body.appendChild(A),A.click(),A.remove(),en("âœ… Poster downloaded successfully!","#43A047")}return p(),C}catch(I){return console.error("âŒ generateImage error",I),en("âŒ Failed to generate poster","#E53935"),p(),null}}async function eb(e=!1){try{let t=await ey();if(!t)return;let a=await fetch(t),i=await a.blob(),l=new File([i],"AksharaChitra_Poster.png",{type:i.type});if(navigator.canShare?.({files:[l]})){await navigator.share({files:[l],title:"AksharaChitra Poster \uD83C\uDFA8",text:"Created with AksharaChitra â€” Multilingual Poster Maker \uD83C\uDF38"}),en("âœ… Shared successfully!","#43A047");return}let s=document.createElement("a");s.href=t,s.download="AksharaChitra_Poster.png",document.body.appendChild(s),s.click(),s.remove(),e?(window.open(`https://wa.me/?text=${encodeURIComponent("\uD83C\uDF38 Created with AksharaChitra! \uD83C\uDFA8 Try it: https://aksharachitra.netlify.app")}`,"_blank"),en("\uD83D\uDCAC Poster downloaded â€” WhatsApp opened!","#1E88E5")):en("\uD83D\uDCE9 Poster downloaded â€” share manually!","#1E88E5")}catch(n){console.error("Share failed:",n),en("âŒ Share failed","#E53935")}}async function ev({sortBy:e="newest",filter:t="",page:a=1,pageSize:i=12}={}){let l=document.getElementById("galleryContainer");if(!l)return;l.style.minHeight="120px",l.innerHTML="";let s=document.createElement("div");s.className="gallery-header-panel",s.innerHTML=`
    <span id="TotalCount">Total: â€¦</span>
    <select id="sortSelect">
      <option value="newest">Newest First</option>
      <option value="oldest">Oldest First</option>
      <option value="name-asc">A â†’ Z</option>
      <option value="name-desc">Z â†’ A</option>
    </select>
    <select id="pageSizeSelect">
      <option value="6">6 per page</option>
      <option value="12" selected>12 per page</option>
      <option value="20">20 per page</option>
    </select>
    <input id="galleryFilter" placeholder="Filter by titleâ€¦">
    <div class="button-group">
      <button id="refreshGallery" class="btn ghost small">ğŸ”„ Refresh</button>
      <button id="downloadAll" class="btn primary small">â¬‡ Download All</button>
      <button id="clearAll" class="btn danger small">ğŸ—‘ Clear All</button>
    </div>
  `,l.appendChild(s);let n=document.createElement("div");n.className="gallery-grid-wrap",n.innerHTML=`<div class="gallery-loading">Loadingâ€¦</div>`,l.appendChild(n);let r=[];try{r=await et()}catch(o){n.innerHTML='<div class="gallery-empty">Could not load gallery.</div>';return}r=Array.isArray(r)?r:[];let d=r.length;s.querySelector("#TotalCount").textContent=`Total: ${d}`,s.querySelector("#sortSelect").value=e,s.querySelector("#pageSizeSelect").value=i,s.querySelector("#galleryFilter").value=t;let c=r.slice(),u=t.trim().toLowerCase();u&&(c=c.filter(e=>(e.title||"").toLowerCase().includes(u))),"newest"===e&&c.sort((e,t)=>t.ts-e.ts),"oldest"===e&&c.sort((e,t)=>e.ts-t.ts),"name-asc"===e&&c.sort((e,t)=>(e.title||"").localeCompare(t.title||"")),"name-desc"===e&&c.sort((e,t)=>(t.title||"").localeCompare(e.title||""));let g=c.length,p=Number(i),m=Math.max(1,Math.ceil(g/p)),h=Math.min(Math.max(1,a),m),y=(h-1)*p,b=c.slice(y,y+p);if(b.length){let v=document.createElement("div");v.className="gallery-grid",b.forEach(e=>{let t=document.createElement("div");t.className="gallery-item",t.innerHTML=`
        <div class="gallery-thumb-wrap">
          <img 
            src="${e.dataUrl}" 
            alt="${e.title}" 
            class="gallery-thumb"
            loading="lazy"
            onload="this.classList.add('loaded')"
          />
          <div class="card-overlay">
            <button data-id="${e.id}" data-act="preview">ğŸ”</button>
            <button data-id="${e.id}" data-act="download">â¬‡</button>
            <button class="delete-btn" data-id="${e.id}" data-act="delete">ğŸ—‘</button>
          </div>
        </div>
        <div class="gallery-meta">
          <div class="gallery-title">${e.title||"Untitled"}</div>
          <div class="gallery-date">${new Date(e.ts).toLocaleDateString()}</div>
        </div>
      `,v.appendChild(t)}),n.innerHTML="",n.appendChild(v);let f=document.createElement("div");f.className="gallery-pagination",f.innerHTML=`
      ${h>1?`<button id="prevPage" class="btn ghost small">â—€ Prev</button>`:""}
      <span class="page-num">${h} / ${m}</span>
      ${h<m?`<button id="nextPage" class="btn ghost small">Next â–¶</button>`:""}
    `,n.appendChild(f),f.querySelector("#prevPage")?.addEventListener("click",()=>ev({sortBy:e,filter:t,page:h-1,pageSize:p})),f.querySelector("#nextPage")?.addEventListener("click",()=>ev({sortBy:e,filter:t,page:h+1,pageSize:p})),v.addEventListener("click",async a=>{let i=a.target.closest("button");if(!i)return;let l=r.find(e=>e.id==i.dataset.id);if(!l)return;let s=i.dataset.act;if("preview"===s&&openPreviewModal(l),"download"===s&&downloadPoster(l),"delete"===s){if(!confirm("Delete this poster?"))return;await ea(l.id),ev({sortBy:e,filter:t,page:h,pageSize:p})}})}else n.innerHTML='<div class="gallery-empty">No posters found.</div>';s.querySelector("#sortSelect").addEventListener("change",e=>ev({sortBy:e.target.value,filter:t,page:1,pageSize:p})),s.querySelector("#pageSizeSelect").addEventListener("change",a=>ev({sortBy:e,filter:t,page:1,pageSize:Number(a.target.value)})),s.querySelector("#galleryFilter").addEventListener("input",t=>{clearTimeout(window.__filterDelay),window.__filterDelay=setTimeout(()=>{ev({sortBy:e,filter:t.target.value,page:1,pageSize:p})},300)}),s.querySelector("#refreshGallery").addEventListener("click",()=>ev({sortBy:e,filter:t,page:1,pageSize:p})),s.querySelector("#clearAll").addEventListener("click",async()=>{if(!confirm("Delete ALL posters?"))return;let e=await X(),t=e.transaction(J,"readwrite");t.objectStore(J).clear(),t.oncomplete=()=>{en("Cleared all","#E53935"),ev()}}),s.querySelector("#downloadAll").addEventListener("click",()=>ef(r))}async function ef(e){if(!e||!e.length){en("No posters to download","#E53935");return}let t=new JSZip,a=t.folder("AksharaChitra_Posters");for(let i=0;i<e.length;i++){let l=e[i];try{let s=await fetch(l.dataUrl),n=await s.blob(),r=(l.title||`poster_${i+1}`).replace(/[^\w\- ]/g,"").slice(0,40);a.file(`${r}.png`,n)}catch(o){console.error("ZIP add failed for item",i,o)}}let d=await t.generateAsync({type:"blob"});saveAs(d,"AksharaChitra_Posters.zip"),en("All posters downloaded as ZIP \uD83C\uDF89","#00BFA5")}f&&t(f,"change",()=>{let e=f.value,t=eh[e]||eh.en;i&&(i.placeholder=t.title),l&&(l.placeholder=t.subtitle),s&&(s.placeholder=t.message)}),ec(),p&&t(p,"click",async()=>{await ey({download:!1})}),m&&t(m,"click",async()=>{await ey({download:!0})}),h&&t(h,"click",()=>eb(!1)),k&&t(k,"click",()=>eb(!0)),y&&t(y,"click",async()=>{try{let t=await ey();if(!t)return;let a={title:i?.value||"Untitled",dataUrl:t,ts:Date.now()};await ee(a),en("âœ… Saved to My Creations (offline)","#43A047");let l=e("gallery");l&&l.classList.contains("active")&&ev()}catch(s){console.error("Save failed",s),en("âŒ Save failed","#E53935")}}),window.openPreviewModal=function(e){let t=document.getElementById("akPreviewModal");t&&t.remove();let a=document.createElement("div");a.id="akPreviewModal";let i=document.createElement("div");i.className="ak-preview-box",i.innerHTML=`
    <div class="ak-preview-header">
      <div>
        <div class="ak-preview-title">${e.title||"Untitled"}</div>
        <div class="ak-preview-date">${new Date(e.ts).toLocaleString()}</div>
      </div>

      <!-- CLOSE BUTTON (LEFT SIDE SUPPORT READY IN CSS) -->
      <button class="btn ghost small" id="closePreview">âœ–</button>
    </div>

    <img src="${e.dataUrl}" class="ak-preview-img" alt="Poster">

    <div class="ak-preview-actions">
      <button class="btn primary" id="previewDownload">â¬‡ Download</button>
    </div>
  `,a.appendChild(i),document.body.appendChild(a),document.getElementById("closePreview").onclick=()=>a.remove(),document.getElementById("previewDownload").onclick=()=>downloadPoster(e),a.addEventListener("click",e=>{e.target===a&&a.remove()})},window.downloadPoster=function(e){let t=document.createElement("a");t.href=e.dataUrl,t.download=`${(e.title||"poster").replace(/[^\w\- ]/g,"")}.png`,t.click()},window.sharePoster=async function(e){try{let t=await fetch(e.dataUrl),a=await t.blob(),i=new File([a],`${(e.title||"poster").replace(/\s+/g,"_")}.png`,{type:"image/png"});if(navigator.canShare?.({files:[i]})){await navigator.share({files:[i],title:e.title||"AksharaChitra Poster",text:"Shared from AksharaChitra"});return}let l=`Poster: ${e.title||""}
Created: ${new Date(e.ts).toLocaleString()}`;window.open(`https://wa.me/?text=${encodeURIComponent(l)}`,"_blank")}catch(s){console.error("Share failed",s),en("Share failed","#E53935")}};let ew=e("startVoice"),e$=e("stopVoice"),ek=window.speechSynthesis,eS=window.SpeechRecognition||window.webkitSpeechRecognition,ex={eng:"en-IN",tel:"te-IN",hin:"hi-IN",tam:"ta-IN",kan:"kn-IN",mal:"ml-IN",ori:"or-IN",san:"sa-IN"},eL=null;if(eS){function eE(){let e=f?.value;console.log("Selected language for recognition:",e),console.log("langMap contents:",ex),void 0===e?console.log("No language selected, defaulting to en-IN"):e in ex?(eL.lang=ex[e],console.log("Language found in langMap:",ex[e])):(eL.lang="en-IN",console.log("Selected language not found in langMap, defaulting to en-IN"))}(eL=new eS).continuous=!1,eL.interimResults=!1,eL.maxAlternatives=1,f&&t(f,"change",eE),eE(),t(ew,"click",()=>{try{eE(),eL.start(),ew.classList.add("listening"),en(`ğŸ¤ Listening in ${f.value.toUpperCase()}...`,"#1E88E5")}catch(e){console.error("Speech recognition error:",e),en("âŒ Speech recognition not supported here.","#E53935")}}),t(e$,"click",()=>{try{eL.stop()}catch{}ew.classList.remove("listening"),en("\uD83D\uDED1 Stopped listening","#E53935")}),eL.onresult=e=>{let t=e.results[0][0].transcript.trim();t&&(s.value=(s.value?s.value+" ":"")+t,"function"==typeof ec&&ec(),e7(t,f.value))},eL.onend=()=>ew.classList.remove("listening")}else ew.disabled=!0,e$.disabled=!0,en("\uD83C\uDF99ï¸ Voice typing not supported in this browser.","#F57C00");function e7(e,t="en"){if(!e)return;if(!ek){alert("Speech synthesis not supported on this browser.");return}let a=new SpeechSynthesisUtterance(e);a.lang=ex[t]||"en-IN",a.rate=1,a.pitch=1;let i=ek.getVoices(),l=i.find(e=>e.lang===a.lang);l&&(a.voice=l),ek.cancel(),ek.speak(a),en(`ğŸ”Š Speaking in ${t.toUpperCase()}...`,"#3949ab")}let eC=e("readMessageBtn");eC&&t(eC,"click",()=>e7(s.value,f.value)),"undefined"!=typeof speechSynthesis&&(speechSynthesis.onvoiceschanged=()=>ek.getVoices());let e_=document.getElementById("ocrImageInput"),eA=document.getElementById("startOcrBtn"),eI=document.getElementById("ocrResult"),eB=document.getElementById("pasteOcrToMessageBtn");function eM(){e_&&(e_.value=""),eI&&(eI.value=""),eA&&(eA.disabled=!0),eB&&(eB.disabled=!0)}let eF=document.getElementById("clearOcrBtn");eF&&eF.addEventListener("click",()=>{eM()}),b&&t(b,"click",()=>{if(!confirm("Clear all fields and reset settings?"))return;[i,l,s].forEach(e=>{e&&(e.value="")}),V="",Q="",D&&(D.value=""),W&&(W.value="");try{G&&G.destroy()}catch(t){}G=null,j=null,z&&z.classList.add("hidden"),[S,x,L].forEach(e=>{e&&(e.value="")}),[E,C,_].forEach(e=>{e&&(e.value="center")}),[A,I,B].forEach(e=>{e&&(e.value="#000000")}),[M,F,P].forEach(e=>{e&&(e.value="#FFFFFF")}),n&&(n.style.background="#FFFFFF"),[o,d,c].forEach(e=>{e&&(e.style.color="#000000")}),T&&(T.value="Montserrat, sans-serif"),N&&(N.value="center"),f&&(f.value="en"),w&&(w.value=""),$&&($.value=""),Y="";let a=e("qrText");a&&(a.value="");let r=e("templateSelect");r&&(r.value="");try{localStorage.removeItem(Z)}catch{}setTimeout(ec,120);let u=document.createElement("div");u.textContent="âœ… All fields and settings have been reset!",Object.assign(u.style,{position:"fixed",bottom:"20px",left:"50%",transform:"translateX(-50%)",background:"#4CAF50",color:"#fff",padding:"10px 18px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",fontFamily:"Montserrat, sans-serif",fontSize:"0.9rem",zIndex:"9999",opacity:"0",transition:"opacity 0.3s ease"}),document.body.appendChild(u),setTimeout(()=>u.style.opacity="1",50),setTimeout(()=>{u.style.opacity="0",setTimeout(()=>u.remove(),600)},2500),eM()}),R&&(t(R,"click",()=>window.scrollTo({top:0,behavior:"smooth"})),window.addEventListener("scroll",()=>{R.style.display=window.scrollY>300?"block":"none"})),setInterval(()=>{try{let e={title:i?.value||"",subtitle:l?.value||"",message:s?.value||"",ts:Date.now()};localStorage.setItem(Z,JSON.stringify(e))}catch{}},4e3);try{let eP=JSON.parse(localStorage.getItem(Z)||"null");eP&&(i&&(i.value=eP.title||""),l&&(l.value=eP.subtitle||""),s&&(s.value=eP.message||""),ec())}catch{}let eT=e("year");async function eD(){if(navigator.serviceWorker)try{await navigator.serviceWorker.ready}catch(e){}await new Promise(e=>requestAnimationFrame(e)),await new Promise(e=>setTimeout(e,150)),await X(),ev()}eT&&(eT.textContent=new Date().getFullYear()),window.ak={renderPreview:ec,generateImage:ey,renderIndexedGallery:ev,saveToDB:ee,deleteFromDB:ea},console.log("âœ… AksharaChitra v18.0 loaded successfully!"),window.initGallerySafe=eD;let e0=document.getElementById("hamburgerBtn"),e3=document.getElementById("mobileMenu");function eN(e){document.querySelectorAll(".tab-content").forEach(e=>e.classList.remove("active")),document.querySelectorAll(".tab-btn").forEach(e=>e.classList.remove("active"));let t=document.getElementById(e);t&&t.classList.add("active");let a=document.querySelector(`.tab-btn[data-tab="${e}"]`);a&&a.classList.add("active"),"gallery"===e&&setTimeout(eD,120),e3&&e3.classList.remove("open"),window.scrollTo({top:0,behavior:"smooth"})}e0&&e3&&(e0.addEventListener("click",e=>{e.stopPropagation(),e3.classList.toggle("open")}),document.addEventListener("click",e=>{e3.contains(e.target)||e0.contains(e.target)||e3.classList.remove("open")})),window.activateTab=eN,document.querySelectorAll(".tab-btn").forEach(e=>{e.addEventListener("click",()=>eN(e.dataset.tab))}),document.querySelectorAll(".m-item").forEach(e=>{e.addEventListener("click",()=>eN(e.dataset.tab))}),eN("home");let e1=document.getElementById("home_feature_share_btn");async function e9(e){try{await navigator.clipboard.writeText(e);let t=confirm("âœ… Message copied to clipboard!\n\n\uD83D\uDCCB You can now paste it anywhere to share.\n\nWould you like to open WhatsApp Web?");t&&window.open(`https://web.whatsapp.com/send?text=${encodeURIComponent(e)}`,"_blank")}catch(a){console.error("Clipboard failed:",a);let i=prompt("\uD83D\uDCCB Copy this message to share AksharaChitra:",e);i&&alert("âœ… Message ready to share! Paste it anywhere.")}}function eW(e){console.log(`Share attempted via: ${e}`)}e1&&(e1.onclick=async()=>{let e=`ğŸŒ¸ *AksharaChitra â€” Multilingual Poster Maker* ğŸ¨

Create Beautiful Posters *Offline* in 8+ Indian Languages! ğŸ‡®ğŸ‡³

âœ¨ *Key Features:*
ğŸ–‹ï¸ Title, Subtitle & Custom Message
ğŸŒ Support for Telugu, Hindi, Sanskrit, Tamil, Kannada, Malayalam, Odia & English
ğŸ¨ 52+ Native Indian Font Families
ğŸ“ *Smart Local Font Loader* â€” Load & filter fonts from your desktop by language, save favorites offline
ğŸ“± Multiple Templates (News, Birthday, Devotional, Business, Invitation, Quote)
ğŸ–¼ï¸ Upload & Crop Images with Brightness/Contrast Controls
ğŸ”– Add Small Logos & QR Codes
ğŸ™ï¸ Voice Input & Text-to-Speech
ğŸ“¸ *OCR (Image to Text)* â€” Extract text from photos
ğŸ’¾ Save Offline with IndexedDB â€” Access Anytime
ğŸŒ™ Dark Mode Support
ğŸ“² *PWA Ready* â€” Install as App, Works Fully Offline
ğŸ¤– Browser AI Capabilities
ğŸ“¤ Download & Share Anywhere

ğŸ¯ *Perfect For:*
âœ… Event Invitations & Announcements
âœ… Business Promotions & Branding
âœ… Devotional & Cultural Posters
âœ… Birthday Wishes & Greetings
âœ… Educational Content in Regional Languages

ğŸ’¡ *Why AksharaChitra?*
âœ“ 100% Offline â€” No Internet Needed
âœ“ Privacy First â€” All Data Stays on Your Device
âœ“ Made for Bharat ğŸ‡®ğŸ‡³
âœ“ Free & Open Source

ğŸ’– *Made with Love by Yuktishala AI Lab*

ğŸ”— *Get Started Now:*
https://aksharachitra.netlify.app

#AksharaChitra #MultilingualPosterMaker #OfflineFirst #IndianLanguages #PWA #MadeInIndia`,t={title:"AksharaChitra â€” Multilingual Poster Maker",text:e};if(navigator.share)try{await navigator.share(t);return}catch(a){if("AbortError"===a.name){console.log("Share cancelled by user");return}console.log("Native share failed, trying fallbacks:",a)}let i=/Android|iPhone|iPad|iPod|Mobile/i.test(navigator.userAgent);if(i){let l=`https://wa.me/?text=${encodeURIComponent(e)}`,s=window.open(l,"_blank");s||await e9(e);return}await e9(e)})});