<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AksharaChitra â€” Create Beautiful Posters Offline ğŸ¨</title>

  <!-- Favicon & PWA -->
  <link rel="icon" type="image/png" sizes="32x32" href="logo.png">
  <link rel="apple-touch-icon" href="logo.png">
  <meta name="theme-color" content="#1e88e5">
  <link rel="manifest" href="manifest.json" />

  <!-- Styles -->
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&family=Noto+Sans+Telugu&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/cropperjs@1.6.2/dist/cropper.min.css" rel="stylesheet" />
</head>

<body>
  <a href="#mainContent" class="skip-link" aria-label="Skip to main content">â‡© Skip to Main Content</a>

  <!-- HEADER -->
  <header class="topbar">
    <div class="left">
      <img src="logo.png" alt="AksharaChitra logo" class="logo" />
      <span class="app-title">AksharaChitra</span>
    </div>

    <nav class="nav">
      <button class="tab-btn active" data-tab="home">ğŸ  Home</button>
      <button class="tab-btn" data-tab="create">ğŸ¨ Create</button>
      <button class="tab-btn" data-tab="gallery">ğŸ’¾ My Creations</button>
      <button class="tab-btn" data-tab="help">ğŸ“˜ Help</button>
    </nav>

    <div class="right-controls">
      <button id="themeToggle" title="Toggle theme">ğŸŒ™</button>
      <button id="installBtn" class="hidden" title="Install app">ğŸ“²</button>
    </div>
  </header>

  <!-- MAIN -->
  <main class="content" id="mainContent">

    <!-- ğŸ  HOME -->
    <section id="home" class="tab-content active">
      <div class="hero">
        <div class="hero-header">
          <h1>Welcome to <span class="highlight">AksharaChitra</span></h1>
          <div class="voice-controls">
            <button id="speakHome" class="btn ghost">ğŸ”Š Listen</button>
            <button id="startSpeak" class="btn ghost">â–¶ï¸ Start</button>
            <button id="stopSpeak" class="btn ghost">â¹ Stop</button>
          </div>
        </div>
        <img src="logo.png" alt="AksharaChitra logo" class="hero-logo" />
        <p class="lead">
          Your smart, offline tool to create posters, invitations, and quotes instantly â€” from just text & image.
        </p>
        <button class="btn primary large" id="openCreateBtn">ğŸš€ Start Creating</button>
      </div>

      <div class="section why">
        <h2>ğŸŒ¸ Why AksharaChitra?</h2>
        <ul id="featureList">
          <li>âœ… Works offline (PWA)</li>
          <li>ğŸ¨ Supports English & Indian languages</li>
          <li>ğŸ–¼ï¸ Upload & crop images easily</li>
          <li>ğŸ’¾ Save, Download, or Share posters</li>
          <li>ğŸŒˆ Fonts, colors, glow & layout customization</li>
          <li>ğŸ™ï¸ Voice Input & ğŸ”Š Voice Feedback</li>
          <li>â™¿ Accessible, privacy-first design</li>
        </ul>
        <div class="share-features">
          <button id="shareWhatsAppBtn" class="btn primary">ğŸ“¤ WhatsApp</button>
        </div>
      </div>
    </section>

    <!-- ğŸ¨ CREATE -->
    <section id="create" class="tab-content">
      <div class="editor">
        <div class="panel left-panel">
          <label>Language</label>
          <select id="language">
            <option>English</option><option>à°¤à±†à°²à±à°—à±</option><option>à¤¹à¤¿à¤‚à¤¦à¥€</option>
            <option>à®¤à®®à®¿à®´à¯</option><option>à²•à²¨à³à²¨à²¡</option><option>à´®à´²à´¯à´¾à´³à´‚</option><option>à¬“à¬¡à¬¼à¬¿à¬†</option>
          </select>

          <label>Template</label>
          <select id="templateSelect">
            <option value="">â€” Choose Template â€”</option>
            <option value="news">News</option>
            <option value="birthday">Birthday</option>
            <option value="devotional">Devotional</option>
            <option value="business">Business</option>
            <option value="invitation">Invitation</option>
            <option value="quote">Quote</option>
          </select>

          <label>ğŸ–‹ï¸ Title</label>
          <input id="title" placeholder="Enter title...">

          <label>ğŸª¶ Subtitle</label>
          <input id="subtitle" placeholder="Enter subtitle...">

          <label>ğŸ’¬ Message</label>
          <textarea id="message" rows="3" placeholder="Type your message..."></textarea>

          <div class="voice-section">
            <button id="startVoice" class="btn ghost">ğŸ¤ Speak</button>
            <button id="stopVoice" class="btn ghost hidden">â¹ Stop</button>
          </div>

          <div class="row">
            <label>Title Size</label>
            <input id="titleSize" type="number" min="10" max="80" value="28">
            <label>Title Align</label>
            <select id="titleAlign">
              <option value="center" selected>Center</option>
              <option value="left">Left</option>
              <option value="right">Right</option>
            </select>
          </div>

          <div class="row">
            <label>Subtitle Size</label>
            <input id="subtitleSize" type="number" min="10" max="60" value="22">
            <label>Subtitle Align</label>
            <select id="subtitleAlign">
              <option value="center" selected>Center</option>
              <option value="left">Left</option>
              <option value="right">Right</option>
            </select>
          </div>

          <div class="row">
            <label>Message Size</label>
            <input id="messageSize" type="number" min="10" max="48" value="18">
            <label>Message Align</label>
            <select id="contentAlign">
              <option value="center" selected>Center</option>
              <option value="left">Left</option>
              <option value="right">Right</option>
            </select>
          </div>

          <div class="row">
            <label>Image Position</label>
            <select id="imagePosition">
              <option value="center" selected>Center</option>
              <option value="top">Top</option>
              <option value="bottom">Bottom</option>
              <option value="left">Left</option>
              <option value="right">Right</option>
            </select>
          </div>

          <label>Upload Image</label>
          <input id="imageUpload" type="file" accept="image/*">

          <label>QR Code</label>
          <input id="qrText" placeholder="Link or contact info">

          <div class="row">
            <label>Text Color</label><input type="color" id="textColor" value="#111111">
            <label>BG Color</label><input type="color" id="bgColor" value="#ffffff">
          </div>

          <div class="row">
            <label>Font</label>
            <select id="fontFamily">
              <option>Montserrat</option>
              <option>Noto Sans Telugu</option>
            </select>
          </div>

          <div class="row">
            <label>Glow</label><input type="color" id="shadowColor" value="#000000">
            <label>Blur</label><input type="number" id="shadowBlur" value="0" min="0" max="30">
          </div>

          <div class="row actions">
            <button id="clearBtn" class="btn ghost">ğŸ§¹ Clear</button>
            <button id="saveBtn" class="btn">ğŸ’¾ Save</button>
            <button id="generateBtn" class="btn primary">ğŸ–¼ Generate</button>
          </div>

          <div class="row">
            <button id="downloadBtn" class="btn">â¬‡ Download</button>
            <button id="shareBtn" class="btn ghost">ğŸ“¤ Share</button>
          </div>
        </div>

        <div class="panel right-panel">
          <h3>Live Preview</h3>
          <div id="previewCard" class="card">
            <div id="pTitle" class="p-title"></div>
            <div id="pSubtitle" class="p-subtitle"></div>
            <div id="pMessage" class="p-body"></div>
            <div id="pImage" class="p-image"></div>
            <div id="pQR" class="p-qr"></div>
            <div class="watermark">aksharachitra.netlify.app</div>
          </div>
        </div>
      </div>
    </section>

    <!-- ğŸ“˜ HELP -->
    <section id="help" class="tab-content">
      <h2>ğŸ“˜ Help & Tips</h2>
      <button id="speakHelp" class="btn ghost">ğŸ”Š Listen</button>
      <ul>
        <li>ğŸ–‹ï¸ Set text, upload image</li>
        <li>ğŸ¨ Style fonts, colors, glow</li>
        <li>ğŸ’¾ Save or share instantly</li>
        <li>ğŸ“² Works offline as PWA</li>
      </ul>
    </section>
  </main>

  <footer class="footer">
    <p>Â© <span id="year"></span> AksharaChitra â€” Made with â¤ï¸ by <strong>Sandeep Miriyala</strong></p>
    <button id="goTopBtn" class="go-top">â¬†ï¸ Go to Top</button>
    <button id="openFeedbackModal" class="feedback-btn" title="Send feedback">ğŸ’Œ Feedback</button>
  </footer>

  <!-- ğŸ’Œ Feedback Modal -->
  <div id="feedbackModal" class="modal hidden">
    <div class="modal-content">
      <h3>ğŸ’Œ Share Your Feedback</h3>
      <iframe
        src="https://docs.google.com/forms/d/e/1FAIpQLSdkJ4AgmO7FJOZuhnLO7KaOkuc17fvbkcrBw1eXliwn7GPz4w/viewform?embedded=true"
        style="width:100%;height:420px;border:none;border-radius:8px;"
        loading="lazy"
      ></iframe>
      <button id="closeFeedbackModal" class="btn ghost">Close</button>
    </div>
  </div>

  <!-- JS -->
  <script src="https://cdn.jsdelivr.net/npm/cropperjs@1.6.2/dist/cropper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="main.js" defer></script>
  <script src="pwa.js" defer></script>

  <!-- ğŸ¤ Voice + Share + Navigation Fixes -->
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    function speakText(text, lang = "en-IN", rate = 1, pitch = 1, volume = 1) {
      if (!("speechSynthesis" in window)) return alert("Speech not supported");
      window.speechSynthesis.cancel();
      const utter = new SpeechSynthesisUtterance(text);
      utter.lang = lang; utter.rate = rate; utter.pitch = pitch; utter.volume = volume;
      window.speechSynthesis.speak(utter);
    }

    function stopSpeech() { if ("speechSynthesis" in window) window.speechSynthesis.cancel(); }

    document.getElementById("startSpeak")?.addEventListener("click", () =>
      speakText("Welcome to Akshara Chitra! Create beautiful posters, invitations, and quotes instantly.")
    );
    document.getElementById("stopSpeak")?.addEventListener("click", stopSpeech);
    document.getElementById("speakHelp")?.addEventListener("click", () =>
      speakText("Here are a few tips. Set your text and upload an image. Customize fonts, colors, and glow. Save or share instantly. Works offline as a progressive web app.")
    );
    document.getElementById("speakHome")?.addEventListener("click", () =>
      speakText("Welcome to Akshara Chitra! Your smart, offline tool to create posters, invitations, and quotes instantlyâ€”from just text and image.")
    );

    // ğŸŸ¢ WhatsApp Share
    function shareToWhatsApp(msg = "") {
      const siteURL = "https://aksharachitra.netlify.app";
      const text = msg || `ğŸ¨ Check out AksharaChitra â€” Create beautiful posters, invitations, and quotes instantly!\n\n${siteURL}`;
      window.open(`https://wa.me/?text=${encodeURIComponent(text)}`, "_blank");
    }
    document.getElementById("shareWhatsAppBtn")?.addEventListener("click", () => shareToWhatsApp());
    document.getElementById("shareBtn")?.addEventListener("click", () => {
      const title = document.getElementById("title").value || "My Poster";
      const msg = document.getElementById("message").value || "";
      shareToWhatsApp(`ğŸ–¼ï¸ *${title}*\n\n${msg}\n\nMade with â¤ï¸ in AksharaChitra\nhttps://aksharachitra.netlify.app`);
    });

    // ğŸš€ Start Creating button
    document.getElementById("openCreateBtn")?.addEventListener("click", () => {
      document.querySelectorAll(".tab-content").forEach(sec => sec.classList.remove("active"));
      document.getElementById("create").classList.add("active");
      document.querySelectorAll(".tab-btn").forEach(btn => btn.classList.remove("active"));
      document.querySelector('[data-tab="create"]').classList.add("active");
      window.scrollTo({ top: 0, behavior: "smooth" });
    });

    // â¬†ï¸ Go to Top button
    document.getElementById("goTopBtn")?.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
    });

    // ğŸ’Œ Feedback modal open/close
    const feedbackModal = document.getElementById("feedbackModal");
    document.getElementById("openFeedbackModal")?.addEventListener("click", () => {
      feedbackModal.classList.remove("hidden");
    });
    document.getElementById("closeFeedbackModal")?.addEventListener("click", () => {
      feedbackModal.classList.add("hidden");
    });
  </script>
</body>
</html>
